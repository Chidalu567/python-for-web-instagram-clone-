(self.webpackChunklite=self.webpackChunklite||[]).push([[7106],{6742:(e,n,t)=>{"use strict";t.d(n,{e0:()=>y,Rf:()=>L,Xw:()=>k});var r=t(59713),o=t.n(r),a=t(28655),i=t.n(a),u=t(71439),c=t(67294),s=t(12291),l=t(31429),p=t(55346),f=t(9785),d=t(89894),v=t(80735),m=t(62630),h=t(27572),E=t(28309),w=t(72955),x=t(14391),g=t(80637),b=t(27952);function R(){var e=i()(["\n  fragment NewsletterV3Promo_publisher on Publisher {\n    __typename\n    ... on User {\n      id\n      username\n      name\n      viewerIsUser\n      newsletterV3 {\n        id\n        ...NewsletterV3Promo_newsletterV3\n      }\n    }\n    ... on Collection {\n      id\n      slug\n      domain\n      name\n      viewerIsEditor\n      newsletterV3 {\n        id\n        ...NewsletterV3Promo_newsletterV3\n      }\n    }\n  }\n  ","\n"]);return R=function(){return e},e}function T(){var e=i()(["\n  fragment NewsletterV3Promo_newsletterV3 on NewsletterV3 {\n    slug\n    name\n    description\n    ...NewsletterV3SubscribeButton_newsletterV3\n    ...NewsletterV3SubscribeByEmail_newsletterV3\n  }\n  ","\n  ","\n"]);return T=function(){return e},e}var y=(0,u.Ps)(T(),l.B,p.Lh),L=(0,u.Ps)(R(),y),N=function(e){return o()({borderTop:"3px solid ".concat(e.accentColor.border.normal),padding:"32px 32px 26px 32px",marginTop:"8px",marginBottom:"25px",backgroundColor:e.baseColor.background.light},g.sm(e),{padding:"24px 24px 28px 24px"})},k=function(e){var n,t,r,o,a,i=e.postId,u=e.publisher,g=c.useRef(null),R=(0,s.v9)((function(e){return{authDomain:e.config.authDomain,isAmp:e.config.isAmp}})),T=R.authDomain,y=R.isAmp,L=(0,m.Av)(),k=(0,E.Iq)(),O=(0,f.YC)().value,S=u.newsletterV3,C=null==S?void 0:S.type,I=u.username,U=void 0===I?"":I,P=(0,b.iB)(null!==(n=null==S?void 0:S.slug)&&void 0!==n?n:"",T,C===x.Rr.NEWSLETTER_TYPE_COLLECTION?u:void 0,C===x.Rr.NEWSLETTER_TYPE_AUTHOR&&U?U:void 0);switch(C){case x.Rr.NEWSLETTER_TYPE_COLLECTION:t="Sign up for ".concat(null==S?void 0:S.name),r="0px",o="You're an editor of ".concat(null==S?void 0:S.name),a=u.viewerIsEditor;break;case x.Rr.NEWSLETTER_TYPE_AUTHOR:t="Get ".concat(u.name,"'s stories in your inbox"),r="6px",o="You cannot subscribe to yourself",a=u.viewerIsUser}var D=!1,A=function(){!D&&V()&&(L.event("newsletterV3.promoViewed",{newsletterV3Id:null==S?void 0:S.id,postId:i}),D=!0)},V=function(){var e;if(!g.current)return!1;var n=null===(e=g.current)||void 0===e?void 0:e.getBoundingClientRect(),t=n.top+n.height/2;return t>=0&&t<=window.innerHeight};return c.useEffect((function(){return A(),window&&w.V6.on("scroll",A),function(){w.V6.off("scroll",A)}}),[]),c.createElement(h.cW,{source:{name:"newsletter_v3_promo",susiEntry:"newsletter_v3_promo"}},c.createElement("div",{ref:g,className:k(N)},c.createElement(d.xu,{paddingBottom:r},c.createElement(v.X6,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},t)),C===x.Rr.NEWSLETTER_TYPE_COLLECTION&&c.createElement(c.Fragment,null,c.createElement(d.xu,{paddingTop:"4px"},c.createElement(v.F,{tag:"h3",scale:"S",color:"DARKER"},"By ".concat(u.name))),c.createElement(d.xu,{paddingTop:"8px",paddingBottom:"10px"},c.createElement(v.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER",tag:"p"},null==S?void 0:S.description,"Â ",!y&&c.createElement(d.rU,{inline:!0,linkStyle:"OBVIOUS",href:P},"Take a look")))),a?c.createElement(d.xu,{paddingTop:"10px"},c.createElement(v.F,{scale:"M",color:"DARKER"},o)):c.createElement(d.xu,{display:"flex",flexWrap:"wrap"},S&&(O||y?c.createElement(l.x,{newsletterV3:S,buttonLayout:"COMPACT",helperTextColor:"DARKER",redirectUrl:y?P:void 0}):c.createElement(p.QL,{newsletterV3:S})))))}},93258:(e,n,t)=>{"use strict";t.d(n,{Z:()=>E});var r=t(34575),o=t.n(r),a=t(93913),i=t.n(a),u=t(2205),c=t.n(u),s=t(78585),l=t.n(s),p=t(29754),f=t.n(p),d=t(67294),v=t(885),m=t(24087),h=t(89894);const E=function(e){c()(a,e);var n,t,r=(n=a,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(n);if(t){var o=f()(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return l()(this,e)});function a(e){var n;return o()(this,a),(n=r.call(this,e)).state={isHovering:!1},n}return i()(a,[{key:"handleMouseEnter",value:function(){this.setState({isHovering:!0})}},{key:"handleMouseLeave",value:function(){this.setState({isHovering:!1})}},{key:"render",value:function(){var e=this,n=this.props,t=n.buttonSize,r=n.targetUserId,o=this.state.isHovering;return d.createElement(m.Z,null,(function(n){return d.createElement(v.Z,{targetUserId:r,viewerId:n&&n.id},(function(n){var r=n.mutate;return d.createElement(h.zx,{buttonStyle:o?"SUBTLE":"ERROR",onClick:r,size:t||"REGULAR",onMouseEnter:function(){return e.handleMouseEnter()},onMouseLeave:function(){return e.handleMouseLeave()}},o?"Unblock":"Blocked")}))}))}}]),a}(d.Component)},79208:(e,n,t)=>{"use strict";t.d(n,{Dm:()=>r,JA:()=>g});var r,o=t(63038),a=t.n(o),i=t(87757),u=t.n(i),c=t(48926),s=t.n(c),l=t(94301),p=t.n(l),f=t(67294),d=t(61250);!function(e){e[e.NONE=0]="NONE",e[e.STARTING=1]="STARTING",e[e.UPLOADING=2]="UPLOADING",e[e.UPLOADED=3]="UPLOADED"}(r||(r={}));var v=new Set(["jpg","jpeg","png","gif"]),m=function(e){return new Promise((function(n){return setTimeout(n,e)}))},h=function(){var e=s()(u().mark((function e(n,t){var r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()(n,{credentials:"same-origin",method:"POST",headers:{accept:"application/json","Content-Type":"application/json","x-xsrf-token":"1","X-Obvious-CID":"web"},body:JSON.stringify({url:t})});case 2:return r=e.sent,e.next=5,r.text();case 5:return o=e.sent,e.abrupt("return",JSON.parse(o.replace("])}while(1);</x>","")));case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),E=function(){var e=s()(u().mark((function e(n,t){var r,o,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("uploadedFile",t),e.next=4,p()(n,{credentials:"same-origin",method:"POST",headers:{"x-xsrf-token":"1","X-Obvious-CID":"web"},body:r});case 4:return o=e.sent,e.next=7,o.text();case 7:return a=e.sent,e.abrupt("return",JSON.parse(a.replace("])}while(1);</x>","")));case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),w="CreateUpload",x=new Error("Image upload failed. The URL you provided may be invalid."),g=function(e,n,t){var o=f.useState(r.NONE),i=a()(o,2),c=i[0],l=i[1],p=f.useRef(null),g=f.useCallback((function(){p.current&&p.current.click()}),[p.current]),b=(0,d.BS)(w),R=(0,d.BS)("CreateUploadUrl");function T(){return y.apply(this,arguments)}function y(){return(y=s()(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(r.STARTING),e.next=3,m(0);case 3:l(r.UPLOADING);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=s()(u().mark((function t(o){var a,i,c,s,p;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T();case 2:if(t.prev=2,R){t.next=5;break}throw new Error("Expected ".concat(w," route to exist"));case 5:return t.next=7,h(R.pathPattern,o);case 7:i=t.sent,c=i.success,s=i.payload,c&&null!=s&&null!==(a=s.value)&&void 0!==a&&a.fileId?((p=new Image).onload=function(){l(r.UPLOADED),e(s,{url:o,height:p.height,width:p.width},(function(){return l(r.NONE)}))},p.onerror=function(){n(x)},p.src=o):n(x),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),n(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}function N(e){return k.apply(this,arguments)}function k(){return(k=s()(u().mark((function o(a){var i,c,s,p,f,d,m,h;return u().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=null==a?void 0:a[0]){o.next=3;break}return o.abrupt("return");case 3:if(c=i.name.split(".").pop(),v.has((null==c?void 0:c.toLowerCase())||"")){o.next=7;break}return t&&t(),o.abrupt("return");case 7:return o.next=9,T();case 9:if(o.prev=9,b){o.next=12;break}throw new Error("Expected ".concat(w," route to exist"));case 12:return o.next=14,E(b.pathPattern,i);case 14:p=o.sent,f=p.success,d=p.payload,f&&null!=d&&null!==(s=d.value)&&void 0!==s&&s.md5&&(m=URL.createObjectURL(i),(h=new Image).onload=function(){l(r.UPLOADED),e(d,{file:i,height:h.height,width:h.width},(function(){return l(r.NONE)}))},h.src=m),o.next=22;break;case 19:o.prev=19,o.t0=o.catch(9),n(o.t0);case 22:case"end":return o.stop()}}),o,null,[[9,19]])})))).apply(this,arguments)}function O(){N(this.files),this.value=""}return f.useEffect((function(){if(p.current)return p.current.addEventListener("change",O),function(){p.current&&p.current.removeEventListener("change",O)}}),[p.current]),{inputRef:p,fireClick:g,status:c,handleDropEvent:function(e){var n=e.dataTransfer;n&&N(n.files)},uploadUrl:function(e){return L.apply(this,arguments)}}}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/7106.32df7fe7.chunk.js.map